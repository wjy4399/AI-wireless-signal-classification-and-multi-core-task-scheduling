# Wireless-program
华为智联杯-无线程序设计大赛-软件挑战赛

## 赛况

我们队名为“搏一搏，单车变摩托”，AI算法任务在测试集上的准确率达到了98.4%（这也是我们没想到的，意外），拿到一个专项奖，但由于调度算法上没有考虑时间复杂度，一直在修改超时问题，最后一个小时封榜后才解决完超时问题，没有时间优化了，有遗憾有收获。

## 方案

- 任务：将30720维度的帧信号分类为11个场景

使用PCA降维方法对训练集和测试集同时降维，使用降维后的数据训练，PCA降维后的最大维度数是样本数和特征数中的较小者，样本特征数为30720，赛方提供的训练样本数为5400，测试样本数为4200，因此我们用PCA将训练样本和测试样本降维为9600维度，然后使用CNN网络进行训练。我们发现模型文件中CNN1，和CNN3的效果较好，训练后通过集成学习投票的方式进行预测。我们比赛中最好的成绩是由三个CNN1模型和三个CNN3模型投票得到的。

## 文件结构

- model：模型代码
  - model.py：各种模型结构代码
  - train_cnn1.py：训练CNN1
  - train_cnn3.py：训练CNN3
  - predict.py：通过多个模型投票预测
  
## 队伍：永远享受兜风的感觉

### 数据集特点：
线上第一次给数据集有一定的规律（每个400单位时间增加一个任务）可以根据这个去减少超时的任务数量。但是受到ai分类准确率的影响，用本地数据具体做的时候可以试试将执行时间改成准确率影响后的执行时间
### 构造得分函数:
赛题变动后，得分函数:（亲和性 + 不超时)  /  最晚完成任务的时间
### 解题思路
在尝试性提交几次后，发现最小化完成任务的最晚时间是主要影响因子，所以我的前提就是让在机器上运行的所有任务的总执行时间趋于平均。
### 考虑亲和性：
以所有用户的第一个任务按照类型进行分类，并以小根堆保存同一类型任务的总执行时间。并将每个机器的预执行时间也以小根堆保存，每次取出小根堆堆顶的机器和同一类型的所有任务进行分配（具体计算执行时间要注意到同一个用户的所有任务只能在一个机器上执行）。实际在优化时需要放出几个后面几个类型的任务，不按照同一类型所有分配原则，而是单个任务分配原则，更能使得总执行时间趋于平均。
### 机器上调度：
我的权重是在尽量保持亲和性的基础上，再考虑不超时任务。打个比方现在在机器一上有个类型一的批量任务，需要在整个批量任务上进行划分（主要根据截至时间调整）进行分段调度。遇到超时的任务放在这个批量的末尾。
### 用户后续任务的处理
我在做的时候是开了三个堆，按照一定的参数指标放入不同的堆中，并且需要考虑堆中任务执行的优先级（这个过程也需要调参）
### 后续可优化的地方：
赛后和某佬交流后，发现可以用反悔贪心的方式来做，因为给的时间限制是4秒，可以设置个学习率来自调整一些参数，每次得到一个调度序列后根据得分函数找出最优的调度策略。


